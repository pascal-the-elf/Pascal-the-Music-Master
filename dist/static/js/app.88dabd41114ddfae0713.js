webpackJsonp([1],{"2Zs2":function(t,e){},"8Mv1":function(t,e){},"9M+g":function(t,e){},Jmt5:function(t,e){},KuPU:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),s=i("T1ft"),n=i.n(s),o={name:"App",mounted(){console.log("[App] App Start")}};localStorage.game||(localStorage.game=JSON.stringify({})),window.str={list:()=>JSON.parse(localStorage.game),get:t=>JSON.parse(localStorage.game)[t],remove(t){let e=JSON.parse(localStorage.game);delete e[t],localStorage.game=JSON.stringify(e)},edit(t,e){let i=JSON.parse(localStorage.game);i[t]=e,localStorage.game=JSON.stringify(i)}};var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container",attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(t){i("2Zs2")},null,null).exports,c=i("/ocq"),d={name:"start",data:()=>({text_title:"歡迎來到 海與旅行者",text_subtitle:"體驗新遊戲",text_start_game:"開始你的旅程",text_login:"登入",text_register:"註冊",text_or:"或"}),mounted:function(){document.title=this.title||this.text_title||document.title||""}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"start"},[i("h1",[t._v(t._s(t.text_title))]),t._v(" "),i("h4",[t._v(t._s(t.text_subtitle))]),t._v(" "),i("hr"),t._v(" "),i("br"),t._v(" "),i("h2",[t._v(t._s(t.text_start_game))]),t._v(" "),i("br"),t._v(" "),i("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"login"}},[t._v(" "+t._s(t.text_login)+" ")]),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"center",margin:"16px 0"}},[i("span",{staticStyle:{padding:"8px","z-index":"2"}},[t._v(" "+t._s(t.text_or)+" ")]),t._v(" "),i("hr",{staticStyle:{width:"16%",display:"inline",position:"absolute",top:"-4px",left:"30%"}}),t._v(" "),i("hr",{staticStyle:{width:"16%",display:"inline",position:"absolute",top:"-4px",right:"30%"}})]),t._v(" "),i("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"register"}},[t._v(" "+t._s(t.text_register)+" ")]),t._v(" "),i("div",{staticClass:"copyright"},[t._v("2021 © Pascal the Elf")]),t._v(" "),i("div",{staticClass:"background"})],1)},staticRenderFns:[]};i("VU/8")(d,m,!1,function(t){i("cetA")},"data-v-3ec6800c",null).exports;var u={name:"login",data:()=>({text_title:"登入你的帳號",text_back:"返回",text_login:"登入",text_email:"電子信箱",text_password:"密碼",text_email_placeholder:"輸入你的電子信箱",text_password_placeholder:"輸入你的密碼",text_login_success:"登入成功",text_login_failed:"登入失敗",form:{email:"",password:""}}),methods:{async login(){let t=await fetch(`https://oatt-api.pascaltheelf.workers.dev/v1/account/login?email=${this.form.email}&password=${this.form.password}`).then(t=>t.json());console.log(t.info.success,t.data),t.info.success?(this.account=t.data,this.$toast.fire({title:this.text_login_success,icon:"success"}),this.account.verified?window.str.remove("verification_email"):window.str.edit("verification_email",this.form.email)):this.$toast.fire({title:this.text_login_failed,icon:"error"})}},mounted:function(){document.title=this.title||this.text_title||document.title||""}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("h1",[t._v(t._s(t.text_title))]),t._v(" "),i("hr"),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"container",staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("b-row",{staticClass:"my-1 input-item"},[i("label",{attrs:{for:"input-email"}},[t._v(t._s(t.text_email))]),i("br"),t._v(" "),i("b-form-input",{attrs:{id:"input-email",type:"email",placeholder:t.text_email_placeholder,required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),i("b-row",{staticClass:"my-1 input-item"},[i("label",{attrs:{for:"input-password"}},[t._v(t._s(t.text_password))]),i("br"),t._v(" "),i("b-form-input",{attrs:{id:"input-password",type:"password",placeholder:t.text_password_placeholder,required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),i("div",{staticStyle:{margin:"8px"}},[i("router-link",{staticClass:"btn btn-outline-danger",staticStyle:{margin:"4px"},attrs:{to:"./"}},[t._v(" "+t._s(t.text_back)+" ")]),t._v(" "),i("b-button",{staticStyle:{margin:"4px"},attrs:{variant:"primary"},on:{click:function(e){return t.login()}}},[t._v(t._s(t.text_login))])],1)],1),t._v(" "),i("div",{staticClass:"copyright"},[t._v("2021 © Pascal the Elf")]),t._v(" "),i("div",{staticClass:"background"})])},staticRenderFns:[]};i("VU/8")(u,h,!1,function(t){i("WYtv")},"data-v-71e64ac5",null).exports;var _={name:"register",data:()=>({text_title:"註冊你的帳號",text_back:"返回",text_register:"註冊",text_name:"名稱",text_email:"電子信箱",text_password:"密碼",text_password_cfm:"再次確認密碼",text_email_placeholder:"輸入你的電子信箱",text_name_placeholder:"輸入你的名稱",text_password_placeholder:"輸入你的密碼",text_password_placeholder_cfm:"再次輸入你的密碼",text_register_success:"註冊成功",text_register_failed:"註冊失敗",form:{name:"",email:"",password:"",password_cfm:""}}),methods:{async register(){let t=await fetch(`https://oatt-api.pascaltheelf.workers.dev/v1/account/register?name=${this.form.name}&email=${this.form.email}&password=${this.form.password}&password_cfm=${this.form.password_cfm}`).then(t=>t.json());console.log(t.info.success,t.data),t.info.success?(this.created=t.data,this.$toast.fire({title:this.text_register_success,icon:"success"}),window.str.edit("verification_email",this.form.email)):this.$toast.fire({title:this.text_register_failed,icon:"error"})}},mounted:function(){document.title=this.title||this.text_title||document.title||""}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"register"},[i("h1",[t._v(t._s(t.text_title))]),t._v(" "),i("hr"),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"container",staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("b-row",{staticClass:"my-1 input-item"},[i("label",{attrs:{for:"input-name"}},[t._v(t._s(t.text_name))]),i("br"),t._v(" "),i("b-form-input",{attrs:{id:"input-name",type:"text",placeholder:t.text_name_placeholder,required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("b-row",{staticClass:"my-1 input-item"},[i("label",{attrs:{for:"input-email"}},[t._v(t._s(t.text_email))]),i("br"),t._v(" "),i("b-form-input",{attrs:{id:"input-email",type:"email",placeholder:t.text_email_placeholder,required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),i("b-row",{staticClass:"my-1 input-item"},[i("label",{attrs:{for:"input-password"}},[t._v(t._s(t.text_password))]),i("br"),t._v(" "),i("b-form-input",{attrs:{id:"input-password",type:"password",placeholder:t.text_password_placeholder,required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),i("b-row",{staticClass:"my-1 input-item"},[i("label",{attrs:{for:"input-password-cfm"}},[t._v(t._s(t.text_password_cfm))]),i("br"),t._v(" "),i("b-form-input",{attrs:{id:"input-password-cfm",type:"password",placeholder:t.text_password_placeholder_cfm,required:""},model:{value:t.form.password_cfm,callback:function(e){t.$set(t.form,"password_cfm",e)},expression:"form.password_cfm"}})],1),t._v(" "),i("div",{staticStyle:{margin:"8px"}},[i("router-link",{staticClass:"btn btn-outline-danger",staticStyle:{margin:"4px"},attrs:{to:"./"}},[t._v(" "+t._s(t.text_back)+" ")]),t._v(" "),i("b-button",{staticStyle:{margin:"4px"},attrs:{variant:"primary"},on:{click:function(e){return t.register()}}},[t._v(t._s(t.text_register))])],1)],1),t._v(" "),i("div",{staticClass:"copyright"},[t._v("2021 © Pascal the Elf")]),t._v(" "),i("div",{staticClass:"background"})])},staticRenderFns:[]};i("VU/8")(_,p,!1,function(t){i("KuPU")},"data-v-1152e123",null).exports;var f={name:"game",data:()=>({text_title:"Game",list:[],button_text:[],timer:5e4,selected:[],id:""}),computed:{options(){let t=[{name:"選擇答案",id:""}];this.list.sort((t,e)=>t.name>e.name?1:-1).forEach(e=>{t.push(e)});return t}},methods:{async game_prepare(){this.id="TEST01",console.log("[Preparation] Set ID",this.id);let t=await fetch(`https://music-master.pascaltheelf.workers.dev/set/global?id=${this.id}`).then(t=>t.json());console.log("[Preparation] Set",t),this.list=t.list,this.shuffle(this.list),console.log("[Preparation] Suffled List",this.list);let e=[];this.list.forEach(t=>{e.push(fetch(`https://yt_audio.pascaltheelf.workers.dev/${t.id}`).then(t=>t.blob()))}),window.sounds=this.sounds=await Promise.all(e),console.log("[Preparation] Sounds",this.sounds),this.audio=[],this.sounds.forEach((t,e)=>{let i=document.createElement("audio");i.src=URL.createObjectURL(t),i.id="sound_"+this.list[e].id,i.addEventListener("play",this.if_playing),this.audio.push(i)}),console.log("[Preparation] Audio",this.audio),this.button_text=new Array(this.list.length),this.button_text.fill("播放"),this.selected=new Array(this.list.length),this.selected.fill(0),this.timer=1e3*t.settings.t,this.loaded=!0,this.$swal.fire("All Source Loaded")},pp(t){if(this.timer<=0)return this.$toast.fire("時間已用盡","","error"),this.button_text[t]="播放",void this.button_text.push();this.audio[t].paused?(this.audio[t].play(),this.button_text[t]="暫停"):(this.audio[t].pause(),this.button_text[t]="播放"),this.button_text.push()},shuffle(t){for(var e,i,a=t.length;0!==a;)i=Math.floor(Math.random()*a),e=t[a-=1],t[a]=t[i],t[i]=e;return t},async if_playing(t){await wait(100),t.path[0].paused||(this.timer-=100,this.if_playing(t),this.timer<=0&&(t.path[0].pause(),this.button_text[index]="播放",this.button_text.push()))}},mounted:function(){document.title=this.title||this.text_title||document.title||"",this.game_prepare(),window.wait=function(t=1e3){return new Promise(e=>{setTimeout(()=>{e()},t)})},window.V=this}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game"},[i("h2",[t._v("Music Master")]),t._v(" "),i("p",[t._v(" 可用時間： "+t._s(t.timer/1e3)+" 秒 ")]),t._v(" "),i("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},t._l(t.list,function(e,a){return i("div",{key:a},[i("div",{staticStyle:{"text-align":"initial",margin:"18px 0"}},[i("h3",[t._v(" 第 "+t._s(a+1)+" 題")]),t._v(" "),i("div",{staticStyle:{display:"flex","flex-direction":"row"}},[i("button",{staticClass:"btn btn-outline-primary rounded-circle",on:{click:function(e){return t.pp(a)}}},[t._v(" "+t._s(t.button_text[a])+" ")]),t._v(" "),i("select",{staticClass:"form-control",staticStyle:{display:"inline-block",width:"calc(100% - 80px)",margin:"0 8px"},on:{input:function(e){return t.selected[a]=e.target.value}}},t._l(t.options,function(e){return i("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}),0)]),t._v(" "),i("br")])])}),0),t._v(" "),i("b-button",{staticStyle:{margin:"4px"},attrs:{variant:"primary"},on:{click:function(t){}}},[t._v(" 送出 ")]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"copyright"},[t._v("2021 © Pascal the Elf")]),t._v(" "),i("div",{staticClass:"background"})],1)},staticRenderFns:[]};var g=i("VU/8")(f,v,!1,function(t){i("8Mv1")},"data-v-586f9b78",null).exports,x={name:"test",data:()=>({text_title:"歡迎來到 海與旅行者",transition_state:0,loading:{canvas:{elm:"",context:""}}}),mounted:function(){document.title=this.title||this.text_title||document.title||""},methods:{change(){this.transition_state?this.draw_transition_in():this.draw_transition_out()},async draw_transition_out(){console.log("[Transition] Start"),this.loading.canvas.elm||(this.loading.canvas.elm=document.querySelector(".transition > canvas")),this.loading.canvas.context||(this.loading.canvas.context=document.querySelector(".transition > canvas").getContext("2d"));let t=parseInt(getComputedStyle(this.loading.canvas.elm).width),e=parseInt(getComputedStyle(this.loading.canvas.elm).height);this.loading.canvas.elm.width=t,this.loading.canvas.elm.height=e;let i=Math.min(t,e)/20,a=[],s=[];for(let s=0;s<Math.floor(t/i+2);s++)for(let t=0;t<Math.floor(e/i+2);t++)a.push({y:i*(t+.5),x:i*(s+.5)});a.sort((t,e)=>t.x+t.y-(e.x+e.y)).forEach(t=>{!s.length||s[s.length-1][s[s.length-1].length-1].x+s[s.length-1][s[s.length-1].length-1].y<t.x+t.y?s.push([t]):s[s.length-1].push(t)});for(let t=0;t<s.length;t++){for(let e=0;e<s[t].length;e++)this.draw_rect(this.loading.canvas.context,s[t][e].x,s[t][e].y,i);await this.wait(25)}console.log("[Transition] Done"),this.transition_state=1},async draw_transition_in(){console.log("[Transition] Start"),this.loading.canvas.elm||(this.loading.canvas.elm=document.querySelector(".transition > canvas")),this.loading.canvas.context||(this.loading.canvas.context=document.querySelector(".transition > canvas").getContext("2d"));let t=parseInt(getComputedStyle(this.loading.canvas.elm).width),e=parseInt(getComputedStyle(this.loading.canvas.elm).height);this.loading.canvas.elm.width=t,this.loading.canvas.elm.height=e;let i=Math.min(t,e)/20,a=[],s=[];for(let s=0;s<Math.floor(t/i+2);s++)for(let t=0;t<Math.floor(e/i+2);t++)a.push({y:i*(t+.5),x:i*(s+.5)});a.sort((t,e)=>t.x+t.y-(e.x+e.y)).forEach(t=>{!s.length||s[s.length-1][s[s.length-1].length-1].x+s[s.length-1][s[s.length-1].length-1].y<t.x+t.y?s.push([t]):s[s.length-1].push(t)});for(let t=0;t<s.length;t++){for(let e=0;e<s[t].length;e++)this.erase_rect(this.loading.canvas.context,s[t][e].x,s[t][e].y,i);await this.wait(25)}console.log("[Transition] Done"),this.transition_state=0},async draw_rect(t,e,i,a){for(let s=0;s<=8;s++)t.fillStyle=`rgba(${55+20*Math.random()}, ${95+20*Math.random()}, ${215+20*Math.random()}, ${.5+s/4})`,t.fillRect(e-.0625*a*s,i-.0625*a*s,.125*s*a+1,.125*s*a+1),await this.wait(30)},async erase_rect(t,e,i,a){for(let s=8;s>=0;s--)t.clearRect(e-.5*a,i-.5*a*s,a+1,a+1),t.fillStyle=`rgba(${55+20*Math.random()}, ${95+20*Math.random()}, ${215+20*Math.random()}, ${.5+s/4})`,t.fillRect(e-.0625*a*s,i-.0625*a*s,.125*s*a,.125*s*a),await this.wait(30);t.clearRect(e-.5*a,i-.5*a,a+1,a+1)},wait:(t=1e3)=>new Promise((e,i)=>{setTimeout(()=>{e(t)},t)})}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"test"},[i("div",{staticClass:"copyright"},[t._v("2021 © Pascal the Elf")]),t._v(" "),i("div",{staticClass:"background"}),t._v(" "),i("div",{staticClass:"transition",on:{click:function(e){return t.change()}}},[i("canvas")])])},staticRenderFns:[]};i("VU/8")(x,w,!1,function(t){i("p8LO")},"data-v-c1af2d00",null).exports;a.default.use(c.a);let y=new c.a({routes:[{path:"/game",name:"game",component:g},{path:"/*",redirect:"/game"}]});y.afterEach((t,e)=>{console.log(`[Router] Location changed: from ${e.name} to ${t.name}`),window.params={};try{for(let[t,e]of window.location.href.split("?")[1].split("&").map(t=>t.split("=").map(decodeURIComponent)))window.params[t]=e}catch(t){}});var b=y,S=i("Tqaz"),C=i("e7x4"),$=i.n(C);i("Jmt5"),i("9M+g"),i("x36W"),i("R870");a.default.component("v-select",n.a),a.default.use(S.a);const k={install:function(t){t.prototype.$swal=$.a,t.prototype.$toast=$.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",$.a.stopTimer),t.addEventListener("mouseleave",$.a.resumeTimer)}})}};a.default.use(k),a.default.config.productionTip=!1,new a.default({el:"#app",router:b,components:{App:l},template:"<App/>",watch:{}})},R870:function(t,e){},WYtv:function(t,e){},cetA:function(t,e){},p8LO:function(t,e){},x36W:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.88dabd41114ddfae0713.js.map